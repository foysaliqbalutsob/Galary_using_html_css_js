<!DOCTYPE html>
<html class="dark" lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Add New Image - Visionary</title>
    
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>
    
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#137fec",
                        "background-light": "#f6f7f8",
                        "background-dark": "#101922",
                    },
                    fontFamily: { "display": ["Inter"] },
                    borderRadius: { "2xl": "1rem", "full": "9999px" },
                },
            },
        }
    </script>
    
    <style type="text/tailwindcss">
        .glass-effect {
            backdrop-filter: blur(12px);
            background-color: rgba(16, 25, 34, 0.8);
        }
    </style>
</head>

<body class="font-display bg-background-light dark:bg-background-dark text-slate-900 dark:text-white min-h-screen">

<header class="sticky top-0 z-50 glass-effect border-b border-slate-200 dark:border-slate-800">
    <div class="flex items-center justify-between px-4 py-4">
        <a href="index.html" class="flex items-center gap-1 text-slate-600 dark:text-slate-400">
            <span class="material-symbols-outlined text-2xl">chevron_left</span>
            <span class="font-medium">Back</span>
        </a>
        <h1 class="text-lg font-bold">Add New Image</h1>
        <div class="w-12"></div> 
    </div>
</header>

<main class="p-4 pb-32 max-w-md mx-auto">
    <div class="mb-8">
        <div class="relative group border-2 border-dashed border-slate-300 dark:border-slate-700 rounded-3xl bg-slate-50 dark:bg-slate-900/50 aspect-square flex flex-col items-center justify-center text-center p-6 transition-all hover:border-primary/50">
            <div id="previewContainer" class="flex flex-col items-center">
                <div class="bg-primary/10 text-primary p-4 rounded-full mb-4">
                    <span class="material-symbols-outlined text-4xl">cloud_upload</span>
                </div>
                <h3 class="text-lg font-semibold mb-1" id="fileName">Select your image</h3>
            </div>
            <input class="absolute inset-0 opacity-0 cursor-pointer" type="file" id="imageFile" accept="image/*"/>
        </div>
    </div>

    <div class="space-y-6">
        <div class="space-y-2">
            <label class="text-sm font-semibold text-slate-700 dark:text-slate-300 ml-1">Image Title</label>
            <input id="imageTitle" class="w-full px-4 py-3.5 rounded-2xl bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 text-sm focus:ring-primary transition-all" placeholder="E.g. Golden Hour over Peaks" type="text"/>
        </div>
        
        <div class="space-y-3">
            <label class="text-sm font-semibold text-slate-700 dark:text-slate-300 ml-1">Category</label>
            <div class="flex flex-wrap gap-2" id="categoryGroup">
                <button class="cat-btn active px-4 py-2 rounded-full border border-primary bg-primary text-white text-xs font-bold uppercase tracking-wider" data-cat="Nature">Nature</button>
                <button class="cat-btn px-4 py-2 rounded-full border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 text-slate-600 dark:text-slate-400 text-xs font-semibold uppercase tracking-wider hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors" data-cat="Architecture">Architecture</button>
                <button class="cat-btn px-4 py-2 rounded-full border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 text-slate-600 dark:text-slate-400 text-xs font-semibold uppercase tracking-wider hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors" data-cat="People">People</button>
            </div>
        </div>
        
        <button onclick="saveToGallery()" class="w-full bg-primary text-white py-4 rounded-2xl font-bold text-lg shadow-lg shadow-primary/30 active:scale-[0.98] transition-all flex items-center justify-center gap-2">
            <span class="material-symbols-outlined">add_photo_alternate</span>
            Add to Gallery
        </button>
    </div>
</main>

<script>
    let selectedCategory = "Nature";

    document.getElementById('imageFile').addEventListener('change', function(e) {
        const file = e.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function(event) {
                const container = document.getElementById('previewContainer');
                container.innerHTML = `<img src="${event.target.result}" class="w-full h-full object-cover rounded-2xl">`;
            }
            reader.readAsDataURL(file);
            document.getElementById('fileName').innerText = file.name;
        }
    });

 
    document.querySelectorAll('.cat-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            document.querySelectorAll('.cat-btn').forEach(b => {
                b.classList.remove('bg-primary', 'text-white', 'border-primary', 'font-bold');
                b.classList.add('bg-white', 'dark:bg-slate-900', 'text-slate-600', 'dark:text-slate-400');
            });
            btn.classList.add('bg-primary', 'text-white', 'border-primary', 'font-bold');
            btn.classList.remove('bg-white', 'dark:bg-slate-900', 'text-slate-600', 'dark:text-slate-400');
            selectedCategory = btn.getAttribute('data-cat');
        });
    });

    function saveToGallery() {
        const file = document.getElementById('imageFile').files[0];
        const title = document.getElementById('imageTitle').value;

        if (!file || !title) return alert("Please fill all fields!");

        const reader = new FileReader();
        reader.onload = function(e) {
            const imageData = {
                id: Date.now(),
                title: title,
                category: selectedCategory,
                src: e.target.result
            };

            const gallery = JSON.parse(localStorage.getItem('myGallery') || '[]');
            gallery.push(imageData);
            localStorage.setItem('myGallery', JSON.stringify(gallery));
            
            alert("Image added successfully!");
            window.location.href = 'index.html';
        };
        reader.readAsDataURL(file);
    }
</script>

</body>
</html>